# 面接練習チャットアプリ 詳細開発依頼書

## 📋 プロジェクト概要

### 🎯 プロジェクトの核心目標
**「面接などほとんど経験のない小学6年生が、明和中のリフレクション面接で最高の面接をするための経験を蓄える強力なツール」**

愛知県公立中高一貫校（明和高校附属中学校等）の入試二次面接における面接練習を支援するAIチャットアプリケーションを開発してください。リアルタイムな対話を通じて、受験生が面接スキルを向上させることを目的とします。

---

## 🏫 対象校・対象ユーザー

### 対象校
- **2025年開校**: 明和高校附属中、刈谷高校附属中、津島高校附属中、半田高校附属中
- **2026年開校予定**: 豊田西高校附属中、時習館高校附属中、西尾高校附属中、日進高校附属中、愛知総合工科高校附属中

### 主要ユーザー
- **主要**: 愛知県公立中高一貫校を受験する小学6年生（2026年入試対象）
- **副次**: 保護者（練習状況確認、学習サポート、同席練習）
- **想定利用者数**: Phase 1: 100名（4校×25名）→ Phase 2: 320名（4校×80名）

---

## 🎓 明和中の面接特色（最重要・完全再現必須）

### 明和中が求める生徒像
- **求める生徒像**: 「夢や憧れを持ち、それらを実現するために粘り強く挑戦する人」
- **育成目標**: 知的好奇心をもって主体的に学び、個性を発揮して資質を磨き、仲間とともに成長できる生徒

### 面接の核心的特徴
**明和高校附属中の面接は「探究活動」についての質問に終始する**

### 7つの探究活動評価項目（5段階評価）- AIが自動分析する項目

1. **真の興味・関心度** - その探究活動を心より好きか？本当に興味・関心があるか？
2. **体験・学び基盤性** - その探究活動は自分の体験や学びに基づいているか？
3. **社会・日常連結性** - その探究活動は日常生活または社会と結びついているか？
4. **探究性・非正解性** ⚠️ - その探究内容には決まった正解（答え）がないか？（正解がない=良い探究活動）
5. **他者理解・共感可能性** - その探究活動は他者が理解できるものか？共感できるものか？
6. **自己変容・成長実感** - この探究活動を通じて、自分の行動や考え、価値観など自分の在り方生き方に変化をもたらしたか？
7. **自分の言葉表現力** - 自分のことばで語っているか？

---

## 🎭 実際の面接フロー（完全再現必須）

### 4段階面接進行モデル

#### 1. 冒頭確認段階（2-3分）
- 受験番号・氏名確認
- 来校方法詳細確認（交通手段、乗り換え、同行者等）
- リラックス効果と基本的応答能力確認

#### 2. 探究活動集中段階（8-10分）⭐ **最重要セクション**
- 志願理由書の探究活動について1分間説明要求
- **段階的深堀り質問（5-6層の質問ツリー）**
- 課題解決プロセスの詳細確認
- 協働・対話経験の具体的エピソード深掘り

#### 3. メタ認知確認段階（2-3分）
- 異なる活動・経験間の共通点発見
- 学習プロセスの自己分析
- 答えのない問題への取り組み方確認

#### 4. 将来連結段階（1-2分）
- 次の探究テーマへの展望
- 中学・高校での学習計画
- 社会との繋がり意識確認

### 実際の合格者面接事例（参考データ）

**合格者Tさん（生物飼育の探究活動）の面接フロー：**
```
探究活動の説明（生き物飼育の喜びと困難）
├→ 生き物飼育の困難点詳細（餌の試行錯誤、水質管理、金銭的課題）
│  ├→ 飼育開始のきっかけ（5-6歳、祖母の家のアゲハチョウ幼虫）
│  └→ ウミウシ飼育の具体的経験
├→ 周りの反応（学校での標本展示、友達の反応）
├→ ウミウシ飼育の課題解決（水族館・ペットショップでの聞き込み）
│  ├→ ウミウシ入手方法（碧南での釣りで偶然発見）
│  └→ 飼育期間と今後の計画
└→ 好きな生き物（メンダコ）
   ├→ メンダコを好きな理由（かわいさ、深海環境への興味）
   ├→ 実際の観察経験（沼津港深海水族館）
   └→ 実物を見た感想（予想外の活発な動き）
```

**合格者Hさん（ダンス選抜チームの探究活動）の面接フロー：**
```
探究活動の説明（全国一を目指すダンスチーム活動）
├→ ダンス開始のきっかけ（音楽好き、母の勧め）
├→ チーム構成（16人メンバー、3人講師、ジャンル別指導）
├→ 課題解決の具体例
│  ├→ 振付のばらつき問題（鏡なし練習→鏡あり練習のサイクル）
│  ├→ 話し合いで解決できない場合（専門講師への質問）
│  └→ 意見対立時の対処法（双方の意見を聞き、良い点を統合）
├→ 個人的な意見表現の変化（最初は言えない→夏大会後に積極的に）
├→ ダンスと探究活動の共通点（答えがない、課題発見・解決サイクル）
└→ 将来の探究計画（歴史：板垣退助の自由民権運動研究）
```

---

## 🤖 必須のAI技術仕様

### 1. 動的リフレクション質問生成エンジン（コア技術）

#### キーワード抽出AI
```typescript
// 受験生の回答から重要キーワードを自動抽出
function extractSpecificKeywords(response: string): string[] {
  const highPriorityPatterns = [
    /環境委員会|生徒会|委員会|部活動|クラブ活動/g,
    /メダカ|植物|動物|水質|pH値|ダンス|音楽|プログラミング/g
  ];
  
  const mediumPriorityPatterns = [
    /観察|記録|測定|実験|調査|研究|分析/g,
    /小学[1-6]年生|[1-9]年間|毎日|週[1-7]回|継続/g,
    /困難|大変|難しい|失敗|うまくいかない|挫折/g
  ];
  
  return extractByPriority(response, [highPriorityPatterns, mediumPriorityPatterns]);
}
```

#### 活動タイプ識別システム
```typescript
// 探究活動を6つのタイプに自動分類
function identifyActivityType(response: string): ActivityType {
  const typePatterns = {
    '科学・個人研究系': /メダカ|植物|動物|水質|pH|実験|観察|育成/,
    '芸術・協働系': /ダンス|音楽|演劇|美術|チーム|グループ|発表/,
    'スポーツ・競技系': /サッカー|野球|バスケ|記録|タイム|練習|試合/,
    '技術・創造系': /プログラミング|ロボット|アプリ|電子工作|作る/,
    'リーダーシップ系': /生徒会|委員長|代表|リーダー|企画|運営/,
    '地域・社会貢献系': /ボランティア|地域|環境|福祉|国際交流/
  };
  
  return matchActivityType(response, typePatterns);
}
```

#### 7-9層深堀り質問生成
```typescript
// 実際の面接官レベルの深堀り質問を自動生成
async function generateInquiryDeepDiveQuestion(context): Promise<string> {
  const extractedKeywords = extractSpecificKeywords(lastResponse);
  const activityType = identifyActivityType(lastResponse);
  const deepDiveTargets = identifyDeepDiveTargets(lastResponse);
  
  const prompt = `
  【明和中AIリフレクション面接システム】
  
  受検生回答: "${lastResponse}"
  抽出キーワード: ${extractedKeywords.join('、')}
  活動タイプ: ${activityType}
  深掘りターゲット: ${deepDiveTargets.join('、')}
  現在の深掘り層: ${currentDepth}/9
  
  実際の合格者面接レベルの質問技術で深掘り質問を生成:
  - 受検生の発言から具体的キーワードを必ず活用
  - "${extractedKeywords[0]}について〜ですね"で発言を受け止める
  - その後"〜はありませんでしたか？"で深掘りする
  - 活動タイプ別の専門的質問をする
  - 明和中7軸評価のうち、弱い項目を強化する質問をする
  `;
  
  return await geminiAPI.generate(prompt);
}
```

### 2. 不適切回答AI検出システム
```typescript
// 「吾輩は猫である」等のふざけた回答を自動検出・指導
async function checkInappropriateAnswer(question: string, answer: string) {
  const prompt = `
  【明和中面接：回答適切性AI判定】
  
  質問: "${question}"
  受検生回答: "${answer}"
  
  不適切な例: ふざけた内容（「吾輩は猫である」「適当に」「知らない」等）
  
  判定結果をJSON形式で出力:
  {
    "inappropriate": true/false,
    "reason": "判定理由",
    "guidance": "建設的な指導メッセージ"
  }
  `;
  
  const result = await geminiAPI.generate(prompt);
  return JSON.parse(result);
}
```

### 3. リアルタイムAI評価システム
```typescript
// 明和中7軸評価による即座フィードバック
interface MeiwaResearchEvaluation {
  genuineInterest: number;        // 真の興味・関心度 (1-5)
  experienceBase: number;         // 体験・学び基盤性 (1-5)
  socialConnection: number;       // 社会・日常連結性 (1-5)
  noDefinitiveAnswer: number;     // 探究性・非正解性 (1-5)
  otherUnderstanding: number;     // 他者理解・共感可能性 (1-5)
  selfTransformation: number;     // 自己変容・成長実感 (1-5)
  originalExpression: number;     // 自分の言葉表現力 (1-5)
  overallScore: number;           // 総合評価
  strengths: string[];            // 強み
  improvements: string[];         // 改善点
}
```

---

## 📱 UI/UX設計要件（小学生特化）

### モバイルファースト設計（必須）
- **主要デバイス**: iPad、Android タブレット（9-11インチ推奨）
- **補助デバイス**: iPhone、Android スマートフォン
- **PC対応**: 補完的対応（保護者向け管理画面等）

### 小学生特化UI要件
- **タッチターゲット**: 44px以上の大型タッチエリア
- **音声メイン入力**: Web Speech API活用、内蔵マイク対応
- **直感的操作**: 複雑な操作なし、シンプルなタップ・音声入力
- **面接環境再現**: タブレットを面接官に見立てた対面形式
- **視覚的フィードバック**: アニメーション、進捗表示、励ましメッセージ

### 時間管理機能
- **15分間の模擬面接**: 実際の二次面接試験時間（個人面接15分程度）に合わせた時間管理
- **段階別時間配分**: 冒頭確認(2-3分) → 探究活動集中(8-10分) → メタ認知確認(2-3分) → 将来連結(1-2分)

---

## 🔧 技術スタック指定

### フロントエンド（PWA必須）
- **Core**: Next.js 14 + React 18 + TypeScript 5.0+
- **Styling**: Tailwind CSS（小学生特化、44px以上タッチターゲット）
- **State Management**: React Hook + Context API（軽量）
- **PWA**: Service Worker（オフライン音声認識対応）
- **Audio**: Web Speech API（音声メイン入力）

### バックエンド
- **Framework**: Next.js 14 API Routes + TypeScript
- **ORM**: Prisma（SQLite開発 / PostgreSQL本番）
- **Security**: 個人情報暗号化、レート制限、CORS対応

### AIエンジン（コア技術）
- **メインAI**: Gemini 2.5 Flash（動的リフレクション質問生成）
- **フォールバック**: マルチAI対応（OpenAI GPT-4, Claude 3.5）
- **音声処理**: Google Cloud Speech-to-Text + Azure Speech Service
- **音声合成**: ElevenLabs（自然な日本語音声合成）

### データベース
- **Development**: SQLite 3.40+（ローカル開発、軽量）
- **Production**: PostgreSQL 15+（Prisma互換、スケーラブル）
- **Cache**: Redis 7.0+（セッション、レート制限）

---

## 🚀 核心機能一覧

### 1. 志願理由書解析機能
- ユーザーがアップロードした志願理由書（テキストまたはPDF）を解析
- 探究活動の内容を理解し、AI質問生成の基盤データとする
- 7つの評価軸での初期分析を実施

### 2. AIリフレクション面接機能（メイン機能）
- **実際の明和中面接フローの完全再現**
- Gemini APIによる動的質問生成
- 受験生の回答に基づく7-9層の段階的深堀り質問
- 活動タイプ別（科学系、芸術系、スポーツ系等）の専門的質問
- リアルタイムでの質問調整・最適化

### 3. 音声入力・出力機能
- Web Speech API活用の高精度音声認識
- 実際の面接に近い環境での練習
- キーボード入力併用のハイブリッドシステム
- 音声合成による質問読み上げ

### 4. 不適切回答検出・指導機能
- AI による「ふざけた回答」の自動検出
- 建設的な指導メッセージの提供
- 適切な回答例の提示
- 段階的な改善サポート

### 5. リアルタイム評価・フィードバック機能
- 明和中7軸評価による即座分析
- 強み・改善点の具体的指摘
- 面接進行中のリアルタイムアドバイス
- 総合スコアと詳細評価レポート

### 6. 練習履歴・進捗管理機能
- 過去の面接練習の記録と進捗追跡
- 評価項目別の成長グラフ
- 弱点克服のための個別アドバイス
- 保護者向け練習状況レポート

---

## 📊 データ設計要件

### ユーザーデータ
```typescript
interface User {
  id: string;
  email: string;
  studentName: string;
  grade: number; // 6固定
  targetSchoolId: string;
  parentEmail?: string;
  parentConsent: boolean;
  createdAt: Date;
}
```

### 面接セッションデータ
```typescript
interface InterviewSession {
  id: string;
  userId: string;
  sessionType: '冒頭確認' | '探究活動集中' | 'メタ認知確認' | '将来連結';
  totalDuration: number; // 15分制限
  currentDepth: number; // 1-9層
  meiwaEvaluation: MeiwaResearchEvaluation;
  completedAt?: Date;
}
```

### 質問・回答データ
```typescript
interface QuestionResponse {
  id: string;
  sessionId: string;
  question: string;
  response: string;
  responseType: 'audio' | 'text';
  deepDiveLevel: number; // 1-9
  extractedKeywords: string[];
  activityType: ActivityType;
  appropriatenessCheck: {
    appropriate: boolean;
    reason?: string;
    guidance?: string;
  };
  evaluation: MeiwaResearchEvaluation;
  timestamp: Date;
}
```

---

## 🎯 成功指標・達成目標

### 技術的指標
- **応答速度**: AI質問生成 2秒以内
- **音声認識精度**: 95%以上
- **セッション継続率**: 90%以上（15分間）
- **不適切回答検出精度**: 98%以上

### 学習効果指標
- **明和中7軸評価の向上**: 平均1.5ポイント以上向上（5回練習後）
- **ユーザー満足度**: 4.5/5.0以上
- **継続利用率**: 週3回以上の練習継続率70%以上

### ユーザビリティ指標
- **操作習得時間**: 初回利用から面接開始まで5分以内
- **エラー発生率**: 1%以下
- **デバイス互換性**: iOS Safari、Android Chrome、PC Chrome対応100%

---

## 📋 開発フェーズ・納期

### Phase 1: コアシステム開発（8週間）
1. **Week 1-2**: AIエンジン基盤開発（Gemini API統合、質問生成）
2. **Week 3-4**: UI/UX実装（小学生特化、音声入力）
3. **Week 5-6**: 面接フロー実装（4段階進行、7-9層深堀り）
4. **Week 7-8**: 評価システム実装（明和中7軸評価、フィードバック）

### Phase 2: 高度機能・最適化（4週間）
1. **Week 9-10**: 不適切回答検出、マルチAI冗長化
2. **Week 11-12**: 進捗管理、保護者機能、最終テスト

### Phase 3: 本番運用・監視（継続）
- パフォーマンス監視・最適化
- ユーザーフィードバック反映
- AI学習データ蓄積・改善

---

## 🔒 セキュリティ・プライバシー要件

### 個人情報保護
- 小学生の個人情報の厳格な暗号化
- 保護者同意システムの実装
- GDPR、個人情報保護法準拠

### データセキュリティ
- 音声データの暗号化伝送・保存
- セッションデータの安全な管理
- 外部AI APIへの安全な接続

### アクセス制御
- ユーザー認証・認可システム
- 保護者アカウントでの練習状況確認
- レート制限によるAPI保護

---

## 💡 期待する開発成果物

### 1. 完全動作するWebアプリケーション
- PWA対応、タブレット・スマホ最適化
- 15分間の完全面接練習セッション
- リアルタイムAI評価・フィードバック

### 2. 高度なAIシステム
- 明和中面接の完全再現
- 7-9層深堀り質問の自動生成
- 不適切回答の検出・指導

### 3. 包括的なドキュメント
- 技術仕様書・API仕様書
- ユーザーマニュアル（小学生・保護者向け）
- 運用・保守マニュアル

### 4. テスト・品質保証
- 単体テスト・統合テスト（90%以上カバレッジ）
- E2Eテスト（主要ユースケース網羅）
- パフォーマンステスト・負荷テスト

---

## 📞 補足・質問・相談事項

### 開発前に確認したい事項
1. **AI API予算・制限**: Gemini API等の利用料金上限
2. **デプロイ環境**: AWS、Azure、GCP等のインフラ環境設定
3. **スケール要件**: 最大同時利用者数、データ保存期間
4. **追加機能要望**: 上記仕様以外で実装希望の機能

### 技術的な質問・相談
- より効果的なAI面接システムのアイデア
- 小学生のユーザビリティ向上策
- 明和中面接の特殊要件への対応策
- パフォーマンス最適化・コスト削減案

---

**この依頼書に基づいて、明和中受験生が最高の面接練習を行える、革新的でユーザーフレンドリーなAIチャットアプリケーションの開発をお願いします。**