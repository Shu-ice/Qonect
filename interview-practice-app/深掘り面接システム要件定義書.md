# 深掘り面接システム要件定義書 v2.0

## 1. システム概要

### 1.1 目的
明和高校附属中学校の入学面接を忠実に再現し、受験生が本番レベルの面接練習を体験できるシステムを提供する。

### 1.2 基本方針
- 実際の合格者面接（Hさんのダンス、Tさんのメダカ飼育）を基準とした質問レベル
- 7-9層の段階的深掘り質問を実現
- 探究活動に特化した深掘りエンジン
- 6つの活動パターンに対応した専門的質問生成

## 2. 機能要件

### 2.1 深掘り質問生成機能

#### 2.1.1 基本機能
- **段階的深掘り**: 7-9層の段階的質問生成
- **文脈理解**: 受験生の回答から具体的キーワードを抽出
- **活動タイプ識別**: 6つの活動パターンを自動判別
- **強制深掘りモード**: 探究活動が言及された際の自動深掘り

#### 2.1.2 質問生成エンジン
```
入力: 受験生の回答テキスト
処理: 
  1. キーワード抽出（extractSpecificKeywords）
  2. 活動タイプ識別（identifyActivityType）
  3. 深掘りターゲット特定（identifyDeepDiveTargets）
  4. 文脈に応じた質問生成
出力: 自然な日本語による深掘り質問
```

#### 2.1.3 対応活動パターン
1. **科学・個人研究系**: メダカ飼育、植物栽培、実験観察
2. **芸術・協働系**: ダンス、音楽、美術、演劇
3. **スポーツ・競技系**: 各種競技、記録向上、チーム活動
4. **社会・課題解決系**: ボランティア、環境問題、地域活動
5. **技術・創造系**: プログラミング、ロボット、電子工作
6. **リーダーシップ系**: 生徒会、委員長、企画運営

### 2.2 段階移行システム

#### 2.2.1 面接段階
1. **Opening段階** (3質問): 本人確認、交通手段確認
2. **Exploration段階** (7-9質問): 探究活動の深掘り ★強化
3. **Metacognition段階** (1-2質問): メタ認知的関連付け
4. **Future段階** (1-2質問): 将来への展望

#### 2.2.2 移行条件（強化版）
- **Exploration段階移行条件**: 最小7回答 + 核心要素90%達成
- **核心要素**: 困難体験、継続性、学び・発見、プロセス
- **厳格な評価**: 抽象的回答では移行不可

### 2.3 AI質問生成機能

#### 2.3.1 システムプロンプト（強化版）
```
あなたは明和高校附属中学校のベテラン面接官です。
実際の合格者面接と同じレベルの質問技術を駆使してください。

【面接官の質問技術（強化版）】
1. 体験の具体化、プロセスの詳細化、感情・動機の探究
2. 社会性の確認、困難への対処、継続性・情熱の確認
3. 活動タイプ別の専門的質問
4. 7-9層の段階的深掘りを実現する質問レベル

【活動タイプ別の深掘り戦略】
- 科学・個人研究系: 実験プロセス、失敗からの学び、継続動機
- 芸術・協働系: チームワーク、意見対立、協調プロセス
- スポーツ・競技系: 記録向上、挫折克服、メンタル面
- 技術・創造系: トライアンドエラー、問題解決過程、創造性
- 社会・課題解決系: 社会意識、持続的行動、影響力
- リーダーシップ系: 意見調整、責任感、他者理解
```

#### 2.3.2 質問生成プロンプト（強化版）
- 抽出キーワードの積極活用
- 活動タイプに応じた専門的質問
- 深掘りターゲットへの焦点
- 7-9層深掘りを意識した質問レベル

## 3. 実際の合格者面接パターン

### 3.1 Hさん（ダンス）パターン
```
探究活動: チームダンス活動
深掘りポイント:
- 振付のばらつき問題 → 具体的な解決行動
- チーム内の意見対立 → 協調・合意形成プロセス
- 表現力向上の工夫 → 継続的努力と成長実感
質問例: 「課題になった振付にばらつきがありそろわなかった際、具体的にどういう行動をしましたか？」
```

### 3.2 Tさん（メダカ飼育）パターン
```
探究活動: メダカの水質管理・継続飼育
深掘りポイント:
- pH値測定の困難 → 科学的アプローチ
- メダカの死による挫折 → 失敗からの学び
- 4年間の継続理由 → 探究心・生命への愛情
質問例: 「メダカの水質について取り組まれているんですね。pH値を調べる中で、一番困ったことや大変だったことはありませんでしたか？」
```

### 3.3 新パターン（技術系）
```
探究活動: プログラミング・ロボット制作
深掘りポイント:
- エラー・デバッグの困難 → 問題解決プロセス
- 創作物への愛着 → オリジナリティと改善意欲
- 技術習得の継続 → 学習方法と探究心
質問例: 「プログラミングの制作をされているんですね。作る過程で、予想通りにいかなかった時はありませんでしたか？」
```

## 4. 学習効果測定指標

### 4.1 定量指標
- **深掘り達成層数**: 7層以上を目標
- **探究要素出現率**: 困難、継続、学び、プロセスの言及率
- **具体性指標**: 数値、固有名詞、感情表現の出現度
- **面接時間**: 本番想定の12-15分

### 4.2 定性指標
- **探究性の発現**: 試行錯誤、仮説検証、継続的改善
- **社会性の確認**: 他者との協働、支援体制、影響力
- **自己変容の実感**: 成長実感、新たな気づき、価値観変化
- **表現力の向上**: 自分の言葉での説明、具体的な体験描写

### 4.3 活動タイプ別評価軸
```
科学・個人研究系: 
- 仮説→実験→検証サイクル
- 失敗からの学習能力
- 継続的観察・記録習慣

芸術・協働系:
- チーム内協調・合意形成
- 表現力・創造性
- 他者との共感・コミュニケーション

スポーツ・競技系:
- 継続的努力・自己管理
- 挫折克服・メンタル強度
- 記録・成果への執着

技術・創造系:
- 論理的思考・問題解決
- 創造性・独創性
- 技術習得への情熱

社会・課題解決系:
- 社会問題への関心・理解
- 持続的行動力
- 他者・社会への影響意識

リーダーシップ系:
- 組織運営・調整能力
- 責任感・使命感
- 他者理解・共感力
```

## 5. システム品質要件

### 5.1 AI応答品質
- **応答時間**: 3秒以内
- **質問の自然性**: 人間の面接官レベル
- **文脈理解精度**: 95%以上のキーワード抽出
- **深掘り継続性**: 7層以上の質問チェーン

### 5.2 ユーザビリティ
- **音声認識精度**: 90%以上
- **誤認識訂正機能**: リアルタイム編集可能
- **面接進行状況表示**: 段階・深度の可視化
- **準備時間提供**: 必要に応じた思考時間

### 5.3 教育効果
- **本番再現度**: 実際の面接との類似度90%以上
- **学習継続率**: セッション完走率80%以上
- **満足度**: ユーザー評価4.5/5以上
- **成長実感**: 練習前後の自己評価向上

## 6. 技術仕様概要

### 6.1 アーキテクチャ
```
Frontend: Next.js + React + TypeScript
Backend: Next.js API Routes
AI: Google Gemini Pro (Multi-AI対応)
Speech: Web Speech API + 文脈補正
State: React Hook + Context API
```

### 6.2 核心アルゴリズム
```typescript
interface DeepDiveEngine {
  extractSpecificKeywords(response: string): string[]
  identifyActivityType(response: string): ActivityType
  identifyDeepDiveTargets(response: string): string[]
  generateInquiryDeepDiveQuestion(context): Promise<string>
  checkStageTransition(stage, history, pattern): Stage | null
}
```

### 6.3 パフォーマンス目標
- 初回読み込み: 2秒以内
- 質問生成: 3秒以内
- メモリ使用量: 100MB以下
- バンドルサイズ: 500KB以下

## 7. 将来拡張計画

### 7.1 短期（3ヶ月）
- 面接評価システム（明和7軸評価）
- 詳細フィードバック生成
- 練習履歴・成長トラッキング

### 7.2 中期（6ヶ月）
- 他校面接パターン対応
- 集団面接シミュレーション
- AIアバター面接官

### 7.3 長期（1年）
- VR面接環境
- 表情・姿勢分析
- パーソナライズド面接対策

---

**更新履歴**
- v2.0: 深掘り質問生成の全面強化、6活動パターン対応、段階移行条件厳格化
- v1.0: 基本的な面接システム仕様定義