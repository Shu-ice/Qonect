/**
 * ãµã–ã‘ãŸå›ç­”æ¤œå‡ºæ©Ÿèƒ½ã®ãƒ†ã‚¹ãƒˆç”¨ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
 * å®Ÿè£…ã•ã‚ŒãŸcheckJokingAnsweré–¢æ•°ã®å‹•ä½œã‚’ç¢ºèª
 */

// ãƒ†ã‚¹ãƒˆç”¨ã®é–¢æ•°ï¼ˆAPIã‹ã‚‰æŠ½å‡ºï¼‰
function checkJokingAnswer(question, answer) {
  // æ˜ã‚‰ã‹ã«ãµã–ã‘ãŸå›ç­”ã®ãƒ‘ã‚¿ãƒ¼ãƒ³
  const jokingPatterns = [
    // ã‚¢ãƒ‹ãƒ¡ãƒ»æ¼«ç”»ãƒ»ã‚²ãƒ¼ãƒ é–¢é€£
    /ã©ã“ã§ã‚‚ãƒ‰ã‚¢|ã‚¿ã‚¤ãƒ ãƒã‚·ãƒ³|ãƒ¯ãƒ¼ãƒ—|ãƒ†ãƒ¬ãƒãƒ¼ãƒˆ|ç¬é–“ç§»å‹•|é­”æ³•|å¿è¡“|è¶…èƒ½åŠ›/,
    /ãƒ‰ãƒ©ãˆã‚‚ã‚“|ãƒã‚±ãƒ¢ãƒ³|ãƒãƒªã‚ª|ãƒ”ã‚«ãƒãƒ¥ã‚¦|æ‚Ÿç©º|ãƒŠãƒ«ãƒˆ|ãƒ«ãƒ•ã‚£|ã‚³ãƒŠãƒ³/,
    /ã‚²ãƒ¼ãƒ |ãƒ—ãƒ¬ã‚¹ãƒ†|ã‚¹ã‚¤ãƒƒãƒ|DS|ãƒ•ã‚¡ãƒŸã‚³ãƒ³|ã‚¹ãƒãƒ›ã‚²ãƒ¼ãƒ /,
    
    // éç¾å®Ÿçš„ãªäº¤é€šæ‰‹æ®µãƒ»æ–¹æ³•
    /ç©ºã‚’é£›ã‚“ã§|é£›è¡Œæ©Ÿã§å®¶ã‹ã‚‰|ãƒ­ã‚±ãƒƒãƒˆ|UFO|å®‡å®™èˆ¹|ç«œ|ãƒ‰ãƒ©ã‚´ãƒ³|ãƒšã‚¬ã‚µã‚¹|ãƒ¦ãƒ‹ã‚³ãƒ¼ãƒ³/,
    /èµ°ã£ã¦1åˆ†|å…‰ã®é€Ÿåº¦|éŸ³é€Ÿ|æ™‚é€Ÿ1000|ç¬é–“ç§»å‹•|ãƒ¯ãƒ¼ãƒ—ã—ã¦/,
    
    // é£Ÿã¹ç‰©ãƒ»å‹•ç‰©ã§ã®ç§»å‹•
    /ãƒ‘ãƒ³ã«ä¹—ã£ã¦|ãŠå¯¿å¸ã§|ãƒ©ãƒ¼ãƒ¡ãƒ³ã§|ã‚«ãƒ¬ãƒ¼ãƒ©ã‚¤ã‚¹ã§|çŠ¬ã«ä¹—ã£ã¦|çŒ«ã¨ä¸€ç·’ã«|è±¡ã«ä¹—ã£ã¦/,
    
    // æ˜ã‚‰ã‹ãªå˜˜ãƒ»èª‡å¼µ
    /å®‡å®™ã‹ã‚‰|æœˆã‹ã‚‰|ç«æ˜Ÿã‹ã‚‰|ç•°ä¸–ç•Œã‹ã‚‰|æœªæ¥ã‹ã‚‰|éå»ã‹ã‚‰|åˆ¥æ¬¡å…ƒ/,
    /1000æ­³|100æ­³|500å¹´å‰|æ˜¨æ—¥ç”Ÿã¾ã‚ŒãŸ|å®‡å®™äºº|ãƒ­ãƒœãƒƒãƒˆ|AI/,
    
    // ãŠãµã–ã‘è¡¨ç¾
    /ãˆã¸ã¸|ã‚ã¯ã¯|ãµãµãµ|ã«ã‚ƒãƒ¼ã‚“|ã‚ã‚“ã‚ã‚“|ã‚‚ãã‚‚ã|ã´ã‚‡ã‚“ã´ã‚‡ã‚“/,
    /è¶…çµ¶|ã‚ã£ã¡ã‚ƒç¥|ã‚„ã°ãŸã‚“|è‰|w+|ç¬‘|ï½—+/,
    
    // äº¤é€šæ‰‹æ®µã¸ã®ä¸é©åˆ‡ãªå›ç­”
    /ãŠæ¯ã•ã‚“ã®ãŠè…¹ã®ä¸­|åµã‹ã‚‰ç”Ÿã¾ã‚Œã¦|æ‹¾ã‚ã‚Œã¦|ç¥æ§˜ãŒ|å¤©ä½¿ãŒ|æ‚ªé­”ãŒ/
  ];

  // è³ªå•ã«å¯¾ã—ã¦æ˜ã‚‰ã‹ã«ä¸é©åˆ‡ã§éç¾å®Ÿçš„ãªå›ç­”
  const isObviouslyJoking = jokingPatterns.some(pattern => pattern.test(answer));
  
  // çŸ­ã™ãã‚‹å›ç­”ã§æ„å‘³ã‚’ãªã•ãªã„
  const isMeaningless = (
    answer.length < 5 && 
    !/ã¯ã„|ã„ã„ãˆ|åˆ†|æ™‚é–“|é›»è»Š|ãƒã‚¹|è»Š|æ­©|è‡ªè»¢è»Š/.test(answer)
  );
  
  // è³ªå•ã®ç¨®é¡ã«å¿œã˜ãŸä¸é©åˆ‡ã•ãƒã‚§ãƒƒã‚¯
  let contextuallyInappropriate = false;
  
  // äº¤é€šæ‰‹æ®µã‚’èã‹ã‚ŒãŸå ´åˆ
  if (/ä½•ã§æ¥|ã©ã†ã‚„ã£ã¦æ¥|äº¤é€šæ‰‹æ®µ/.test(question)) {
    contextuallyInappropriate = /ã©ã“ã§ã‚‚ãƒ‰ã‚¢|ç©ºé£›ã‚“ã§|ç¬é–“ç§»å‹•|é­”æ³•|å®‡å®™|ç•°ä¸–ç•Œ/.test(answer);
  }
  
  // æ™‚é–“ã‚’èã‹ã‚ŒãŸå ´åˆ
  if (/æ™‚é–“|ã©ã‚Œãã‚‰ã„/.test(question)) {
    contextuallyInappropriate = /0ç§’|ç¬é–“|å…‰é€Ÿ|éŸ³é€Ÿ|1000å¹´|æ°¸é /.test(answer);
  }
  
  // æ¢ç©¶æ´»å‹•ã‚’èã‹ã‚ŒãŸå ´åˆ
  if (/æ¢ç©¶|æ´»å‹•|å–ã‚Šçµ„|ç ”ç©¶/.test(question)) {
    contextuallyInappropriate = /ã‚²ãƒ¼ãƒ |ã‚¢ãƒ‹ãƒ¡|æ¼«ç”»|YouTube|TikTok|ã‚¹ãƒãƒ›|å¯ã‚‹ã“ã¨|é£Ÿã¹ã‚‹ã“ã¨/.test(answer);
  }

  // çµµæ–‡å­—ã ã‘ã®å›ç­”
  const isEmojiOnly = /^[\u{1F600}-\u{1F64F}\u{1F300}-\u{1F5FF}\u{1F680}-\u{1F6FF}\u{1F1E0}-\u{1F1FF}\u{2600}-\u{26FF}\u{2700}-\u{27BF}]+$/u.test(answer.trim());

  return isObviouslyJoking || isMeaningless || contextuallyInappropriate || isEmojiOnly;
}

// ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹
const testCases = [
  {
    name: "ã©ã“ã§ã‚‚ãƒ‰ã‚¢ã§ã®æ¥æ ¡",
    question: "ã“ã¡ã‚‰ã¾ã§ã¯ä½•ã§æ¥ã‚‰ã‚Œã¾ã—ãŸã‹ï¼Ÿ",
    answer: "ã©ã“ã§ã‚‚ãƒ‰ã‚¢ã§æ¥ã¾ã—ãŸã€‚",
    expected: true
  },
  {
    name: "ç¬é–“ç§»å‹•ã®æ™‚é–“",
    question: "ã©ã‚Œãã‚‰ã„æ™‚é–“ãŒã‹ã‹ã‚Šã¾ã—ãŸã‹ï¼Ÿ",
    answer: "0ç§’ã§ã™ã€‚ç¬é–“ç§»å‹•ãªã®ã§ã€‚",
    expected: true
  },
  {
    name: "ãƒã‚±ãƒ¢ãƒ³ç ”ç©¶",
    question: "ã‚ãªãŸã®æ¢ç©¶æ´»å‹•ã«ã¤ã„ã¦æ•™ãˆã¦ãã ã•ã„ã€‚",
    answer: "ãƒã‚±ãƒ¢ãƒ³ã®ç ”ç©¶ã‚’ã—ã¦ã„ã¾ã™ã€‚ãƒ”ã‚«ãƒãƒ¥ã‚¦ã¨ä¸€ç·’ã«é›»æ°—ã®å®Ÿé¨“ã‚’ã—ã¦ã„ã¾ã™ã€‚",
    expected: true
  },
  {
    name: "å®‡å®™äººã®åå‰",
    question: "å—æ¤œç•ªå·ã¨åå‰ã‚’æ•™ãˆã¦ãã ã•ã„ã€‚",
    answer: "å—æ¤œç•ªå·999ç•ªã€å®‡å®™äººXã§ã™ã€‚",
    expected: true
  },
  {
    name: "æ­£å¸¸ãªäº¤é€šæ‰‹æ®µ",
    question: "ã“ã¡ã‚‰ã¾ã§ã¯ä½•ã§æ¥ã‚‰ã‚Œã¾ã—ãŸã‹ï¼Ÿ",
    answer: "é›»è»Šã§æ¥ã¾ã—ãŸã€‚",
    expected: false
  },
  {
    name: "æ­£å¸¸ãªæ™‚é–“å›ç­”",
    question: "ã©ã‚Œãã‚‰ã„æ™‚é–“ãŒã‹ã‹ã‚Šã¾ã—ãŸã‹ï¼Ÿ",
    answer: "30åˆ†ãã‚‰ã„ã§ã™ã€‚",
    expected: false
  },
  {
    name: "æ­£å¸¸ãªæ¢ç©¶æ´»å‹•",
    question: "ã‚ãªãŸã®æ¢ç©¶æ´»å‹•ã«ã¤ã„ã¦æ•™ãˆã¦ãã ã•ã„ã€‚",
    answer: "ç’°å¢ƒå§”å“¡ä¼šã§ãƒ¡ãƒ€ã‚«ã®é£¼è‚²ã‚’ã—ã¦ã„ã¾ã™ã€‚",
    expected: false
  },
  {
    name: "ã‚²ãƒ¼ãƒ é–¢é€£ã®æ´»å‹•",
    question: "æ™®æ®µã©ã‚“ãªæ´»å‹•ã‚’ã—ã¦ã„ã¾ã™ã‹ï¼Ÿ",
    answer: "ã‚²ãƒ¼ãƒ ã‚’ã—ã¦ã„ã¾ã™ã€‚",
    expected: true
  },
  {
    name: "ç©ºã‚’é£›ã¶ç§»å‹•",
    question: "ã©ã†ã‚„ã£ã¦ã“ã“ã¾ã§æ¥ã¾ã—ãŸã‹ï¼Ÿ",
    answer: "ç©ºã‚’é£›ã‚“ã§æ¥ã¾ã—ãŸã€‚",
    expected: true
  },
  {
    name: "çµµæ–‡å­—ã ã‘ã®å›ç­”",
    question: "ã©ã†æ€ã„ã¾ã™ã‹ï¼Ÿ",
    answer: "ğŸ˜€ğŸ˜€ğŸ˜€",
    expected: true
  }
];

console.log("ğŸ­ ãµã–ã‘ãŸå›ç­”æ¤œå‡ºãƒ†ã‚¹ãƒˆé–‹å§‹\n");

let successCount = 0;
testCases.forEach((testCase, index) => {
  const result = checkJokingAnswer(testCase.question, testCase.answer);
  const status = result === testCase.expected ? "âœ… æˆåŠŸ" : "âŒ å¤±æ•—";
  
  if (result === testCase.expected) {
    successCount++;
  }
  
  console.log(`ãƒ†ã‚¹ãƒˆ ${index + 1}: ${testCase.name}`);
  console.log(`è³ªå•: "${testCase.question}"`);
  console.log(`å›ç­”: "${testCase.answer}"`);
  console.log(`æœŸå¾…å€¤: ${testCase.expected ? "ãµã–ã‘ãŸå›ç­”" : "é©åˆ‡"}`);
  console.log(`å®Ÿéš›: ${result ? "ãµã–ã‘ãŸå›ç­”" : "é©åˆ‡"}`);
  console.log(`çµæœ: ${status}\n`);
});

console.log(`ğŸ¯ ãƒ†ã‚¹ãƒˆå®Œäº†: ${successCount}/${testCases.length} æˆåŠŸ`);