# 面接システム動作確認チェックリスト

## 🔍 デバッグチェックポイント

### 1. 初期動作確認
- [ ] 面接開始ボタンをクリック
- [ ] 「それでは面接を始めます。受検番号と名前を教えてください。」が表示される
- [ ] 2.5秒後に音声入力が自動的に開始される（赤いマイクアイコン）

### 2. 音声入力の確認
- [ ] マイクボタンが赤く点滅している
- [ ] 「話してください...」のプレースホルダーが表示される
- [ ] 音声入力が文字として表示される
- [ ] 手動でキーボード入力も可能
- [ ] 前の入力内容が残っていない

### 3. 第1回答後の確認（受検番号・名前）
例：「1234番 夏目漱石です」
- [ ] 送信後、入力欄が完全にクリアされる
- [ ] AIが相槌を含む自然な質問を返す（例：「ありがとうございます。こちらまでは何で来られましたか？」）
- [ ] 2秒後に音声入力が自動的に再開される

### 4. 第2回答後の確認（交通手段）
例：「自転車できました」
- [ ] AIが具体的な相槌を返す（例：「自転車でいらしたんですね。どれくらい時間がかかりましたか？」）
- [ ] 音声入力が自動的に再開される

### 5. 第3回答後の確認（所要時間）
例：「10分です」
- [ ] AIが相槌を返してから探究活動の質問をする
- [ ] 準備時間の提案がある場合がある（「整理する時間が少しほしいようなら差し上げます」）

### 6. 探究活動の深掘り確認
例：環境委員会の活動を説明
- [ ] パターンが正しく判定される（コンソールログで確認）
- [ ] 適切な深掘り質問が生成される
- [ ] 質問が固定文ではなく、文脈に応じた内容になっている

### 7. 6パターンシステムの動作確認

#### A. スポーツ系
「陸上部で短距離走をしています」
- [ ] sports_competitiveパターンが選択される
- [ ] 記録や困難への質問が生成される

#### B. 芸術系（Hさんパターン）
「ダンスチームで活動しています」
- [ ] artistic_collaborativeパターンが選択される
- [ ] チームワークや協働に関する質問が生成される

#### C. 科学系（Tさんパターン）
「生き物の飼育をしています」
- [ ] scientific_individualパターンが選択される
- [ ] 具体的な困難や失敗体験の質問が生成される

#### D. 社会系
「ボランティア活動をしています」
- [ ] social_problem_solvingパターンが選択される
- [ ] 社会問題への関心について質問される

#### E. 技術系
「プログラミングでゲームを作っています」
- [ ] technology_creativeパターンが選択される
- [ ] エラーやバグへの対処について質問される

#### F. リーダーシップ系
「生徒会長をしています」
- [ ] leadership_consensusパターンが選択される
- [ ] 意見対立や合意形成について質問される

### 8. バグチェック
- [ ] 前の入力内容が残ることはない
- [ ] 音声入力が常にデフォルトになっている
- [ ] 「ありがとうございます。次の質問に移らせていただきます。」という固定文は出ない
- [ ] タイプライター効果が正常に動作する
- [ ] オーバーレイが1.5秒間表示される

### 9. コンソールログ確認
```javascript
// 以下のログが出力されることを確認
🔍 探究活動分析開始: "..."
📊 スコア分析結果: 
  sports_competitive: X.XX
  artistic_collaborative: X.XX
  scientific_individual: X.XX
  ...
✅ 選択されたパターン: xxx_xxx
🎯 APIで選択されたパターン: xxx_xxx
📊 現在の段階: xxx, 深度: X
🎤 面接官の返答後、音声認識を自動再開
```

### 10. 合格者例との比較
- [ ] Hさんのようなダンス活動 → 協働・困難克服の深掘りができる
- [ ] Tさんのような生物飼育 → 具体的失敗・再挑戦の深掘りができる
- [ ] 5-9層の段階的深掘りが実現されている

## 🚨 問題が発生した場合

1. **音声認識が開始しない**
   - ブラウザの設定でマイク許可を確認
   - Chrome/Edge推奨（Safari非対応）

2. **パターン判定が間違っている**
   - コンソールログでスコアを確認
   - 探究活動の記述を詳細にする

3. **質問が不自然**
   - Gemini APIキーが有効か確認
   - ネットワーク接続を確認

4. **入力内容が残る**
   - ブラウザをリロードして再試行
   - キャッシュをクリア